<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Executive Brief: Producto Analizado</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #0f172a; --accent: #3b82f6; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #f1f5f9; padding: 20px; color: var(--primary); -webkit-font-smoothing: antialiased; }
        
        /* Container setup for A4 at 96dpi (approx 794px) */
        .brief { width: 794px; margin: 0 auto; background: none; }
        
        .page { 
            width: 794px;
            min-height: 1122px; /* A4 Height */
            background: white; 
            border-radius: 0; 
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.1); 
            overflow: hidden; 
            margin-bottom: 30px; 
            position: relative;
        }
        
        .header { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); color: white; padding: 20px 30px; position: relative; }
        .header::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899); }
        
        .content { padding: 25px 30px; }
        
        /* Layout Utilities */
        .section { margin-bottom: 25px; page-break-inside: avoid; }
        .section-title { font-size: 0.7rem; font-weight: 800; color: #64748b; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; display: flex; align-items: center; gap: 6px; border-bottom: 2px solid #f1f5f9; padding-bottom: 6px; }
        .two-col { display: grid; grid-template-columns: 1.25fr 1fr; gap: 25px; }
        .three-col { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        
        /* Components */
        .card { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 16px; page-break-inside: avoid; }
        
        .verdict-card { background: #fffbeb; border: 2px solid #fde68a; border-radius: 12px; padding: 20px; display: flex; align-items: center; gap: 20px; margin-bottom: 25px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); page-break-inside: avoid; }
        .verdict-icon { font-size: 2.5rem; }
        .verdict-status { font-size: 1.5rem; font-weight: 800; color: #d97706; letter-spacing: -0.5px; }
        .verdict-summary { font-size: 0.85rem; color: #475569; margin-top: 4px; line-height: 1.4; }
        
        .confidence { background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 10px 18px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .confidence-value { font-size: 1.4rem; font-weight: 800; color: var(--accent); }
        .confidence-label { font-size: 0.6rem; color: #64748b; text-transform: uppercase; font-weight: 700; }
        
        .stat-card { text-align: center; padding: 15px; background: white; border: 1px solid #e2e8f0; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.02); page-break-inside: avoid; }
        .stat-value { font-size: 1.6rem; font-weight: 800; letter-spacing: -0.5px; }
        .stat-label { font-size: 0.6rem; color: #64748b; text-transform: uppercase; font-weight: 700; margin-top: 4px; }
    
        .consumer-quote { background: linear-gradient(135deg, #fef3c7 0%, #fef9c3 100%); border-left: 4px solid #f59e0b; padding: 12px 16px; border-radius: 0 8px 8px 0; font-style: italic; font-size: 0.85rem; color: #92400e; margin: 12px 0; line-height: 1.5; page-break-inside: avoid; }
        .lightning { background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%); border: 1px solid #fed7aa; border-radius: 12px; padding: 14px; margin-top: 15px; page-break-inside: avoid; }
        .lightning-title { font-size: 0.75rem; font-weight: 800; color: #ea580c; display: flex; align-items: center; gap: 6px; }
        
        .table { width: 100%; border-collapse: separate; border-spacing: 0; font-size: 0.8rem; }
        .table th { background: #f8fafc; padding: 10px; text-align: left; font-size: 0.65rem; font-weight: 700; color: #64748b; text-transform: uppercase; border-bottom: 2px solid #e2e8f0; }
        .table td { padding: 10px; border-bottom: 1px solid #f1f5f9; vertical-align: middle; }
        .table tr:last-child td { border-bottom: none; }
        
        .page-break { page-break-before: always; }
        
        .footer { background: #f8fafc; border-top: 1px solid #e2e8f0; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; height: 60px; }
        .footer-link { display: inline-flex; align-items: center; gap: 6px; background: var(--accent); color: white; padding: 8px 16px; border-radius: 8px; text-decoration: none; font-size: 0.8rem; font-weight: 600; transition: all 0.2s; box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.3); }
        .footer-link:hover { transform: translateY(-1px); box-shadow: 0 6px 8px -1px rgba(59, 130, 246, 0.4); }

        /* Print Override */
        @media print { 
            body { padding: 0; background: white; -webkit-print-color-adjust: exact; print-color-adjust: exact; } 
            .brief { width: 100%; margin: 0; box-shadow: none; }
            .page { 
                box-shadow: none; 
                margin: 0; 
                border: none;
                border-radius: 0;
                width: 100%; 
                min-height: 297mm; 
                height: 297mm;
                page-break-after: always;
            }
            .page:last-child { page-break-after: avoid; }
            .footer-link { display: none !important; }
            ::-webkit-scrollbar { display: none; }
        }
    </style>
</head>
<body>
    <div class="brief">
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PAGE 1 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="page">
            <div class="header">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <div>
                        <div style="font-size: 0.6rem; font-weight: 700; letter-spacing: 2px; color: #94a3b8; text-transform: uppercase; margin-bottom: 4px;">üéØ Executive Decision Brief</div>
                        <div style="font-size: 1.3rem; font-weight: 800;">Producto Analizado</div>
                    </div>
                    <div style="text-align:right;">
                        <div style="font-size: 0.65rem; color: #94a3b8;">2026-02-09 17:52:07.779347</div>
                        <div style="font-size: 0.6rem; color: #64748b;">0 fuentes ‚Ä¢ P√°gina 1/2</div>
                    </div>
                </div>
            </div>
            
            <div class="content">
                <!-- Verdict -->
                <div class="verdict-card">
                    <div class="verdict-icon">‚ö†Ô∏è</div>
                    <div style="flex:1;">
                        <div class="verdict-status">CAUTION</div>
                        <div class="verdict-summary">Oportunidad viable con reservas. Requiere validaci√≥n adicional antes de comprometer capital.</div>
                    </div>
                    <div class="confidence">
                        <div class="confidence-value">60%</div>
                        <div class="confidence-label">Confianza</div>
                    </div>
                    <div style="text-align:center; padding:0 10px;">
                        <div style="font-size:1.1rem; font-weight:800; color:#8b5cf6;">0.0</div>
                        <div style="font-size:0.5rem; color:#64748b; font-weight:700;">ODI SCORE</div>
                    </div>
                </div>
                
                <!-- SECTION 1: THE OPPORTUNITY -->
                <div class="section">
                    <div class="section-title">üî• La Oportunidad: Dolor Real del Consumidor</div>
                    <div class="two-col">
                        <div class="card">
                            <div style="color:#94a3b8; font-size:0.8rem;">Sin pain points espec√≠ficos.</div>
                        </div>
                        <div>
                            <div class="consumer-quote">üò§ "Los consumidores buscan mejores alternativas."</div>
                            <div class="consumer-quote" style="background:linear-gradient(135deg, #eff6ff 0%, #f0fdf4 100%); border-color:#3b82f6;">üí≠ "Quieren soluciones m√°s efectivas y accesibles."</div>
                            
                            <div style="display:flex; flex-wrap:wrap; gap:6px; margin-top:10px;"></div>
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 2: MARKET SPACE -->
                <div class="section">
                    <div class="section-title">üìä Espacio en el Mercado</div>
                    <div class="three-col" style="margin-bottom:12px;">
                        <div class="stat-card">
                            <div class="stat-value" style="color:#3b82f6;">10</div>
                            <div class="stat-label">Competidores</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" style="color:#16a34a;">$50.0M</div>
                            <div class="stat-label">TAM Total</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" style="color:#8b5cf6;">$375K</div>
                            <div class="stat-label">SOM Captureable</div>
                        </div>
                    </div>
                    
                    <div class="card" style="padding:10px;">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Competidor</th>
                                    <th style="text-align:center;">Rating</th>
                                    <th style="text-align:center;">Reviews</th>
                                    <th style="text-align:center;">Precio</th>
                                    <th>Vulnerabilidad</th>
                                    <th>Oportunidad</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    
                    <div class="two-col" style="margin-top:12px;">
                        <div class="card">
                            <div style="font-size:0.65rem; font-weight:700; color:#64748b; margin-bottom:6px;">üìà MARKET SHARE</div>
                            <div style="color:#94a3b8; font-size:0.75rem;">Sin datos de market share.</div>
                        </div>
                        <div class="card">
                            <div style="font-size:0.65rem; font-weight:700; color:#64748b; margin-bottom:6px;">üìÖ ESTACIONALIDAD</div>
                            
                            <div style="font-size:0.7rem; color:#64748b; margin-top:6px; font-style:italic;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PAGE 2 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="page page-break">
            <div class="header" style="padding:15px 30px;">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <div style="font-size: 0.9rem; font-weight: 700;">Producto Analizado ‚Äî Continuaci√≥n</div>
                    <div style="font-size: 0.6rem; color: #94a3b8;">P√°gina 2/2</div>
                </div>
            </div>
            
            <div class="content">
                <!-- SECTION 3: DIFFERENTIATOR -->
                <div class="section">
                    <div class="section-title">‚ú® Tu Ventaja Diferencial</div>
                    <div class="card" style="margin-bottom:10px;">
                        <div style="font-size:0.8rem; color:#334155; line-height:1.5;">Oportunidad de mercado en evaluaci√≥n.</div>
                    </div>
                    <div class="two-col">
                        <div>
                            <div style="font-size:0.65rem; font-weight:700; color:#64748b; margin-bottom:8px;">üíé PROPUESTA DE VALOR</div>
                            <div style="display:flex; align-items:center; gap:8px; padding:8px; background:linear-gradient(135deg, #eff6ff 0%, #f0fdf4 100%); border-radius:6px; margin-bottom:6px;"><span>‚ú®</span><span style="font-size:0.8rem; color:#1e293b;">Propuesta de valor √∫nica por definir</span></div><div style="display:flex; align-items:center; gap:8px; padding:8px; background:linear-gradient(135deg, #eff6ff 0%, #f0fdf4 100%); border-radius:6px; margin-bottom:6px;"><span>‚ú®</span><span style="font-size:0.8rem; color:#1e293b;">Diferenciador clave pendiente de validaci√≥n</span></div><div style="display:flex; align-items:center; gap:8px; padding:8px; background:linear-gradient(135deg, #eff6ff 0%, #f0fdf4 100%); border-radius:6px; margin-bottom:6px;"><span>‚ú®</span><span style="font-size:0.8rem; color:#1e293b;">Ventaja competitiva en an√°lisis</span></div>
                        </div>
                        <div>
                            <div style="font-size:0.65rem; font-weight:700; color:#64748b; margin-bottom:8px;">üéØ ESTRATEGIA ERRC (Blue Ocean)</div>
                            <div style="color:#94a3b8; font-size:0.75rem;">Grid ERRC pendiente.</div>
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 4: RISKS -->
                <div class="section">
                    <div class="section-title">‚ö†Ô∏è Radar de Riesgos</div>
                    <div class="two-col">
                        <div class="card">
                            
            <div style="display:flex; align-items:flex-start; gap:10px; padding:10px; background:#fffbeb; border-radius:8px; margin-bottom:6px;">
                <span style="font-size:1rem;">üü°</span>
                <div style="flex:1;">
                    <div style="font-weight:600; color:#d97706; font-size:0.8rem;">Competencia establecida</div>
                    <div style="font-size:0.7rem; color:#64748b; margin-top:2px;">üí° Diferenciaci√≥n por innovaci√≥n</div>
                </div>
            </div>
            <div style="display:flex; align-items:flex-start; gap:10px; padding:10px; background:#f0fdf4; border-radius:8px; margin-bottom:6px;">
                <span style="font-size:1rem;">üü¢</span>
                <div style="flex:1;">
                    <div style="font-weight:600; color:#16a34a; font-size:0.8rem;">Barreras de entrada</div>
                    <div style="font-size:0.7rem; color:#64748b; margin-top:2px;">üí° Estrategia de nicho</div>
                </div>
            </div>
                        </div>
                        <div class="card">
                            <div style="font-size:0.65rem; font-weight:700; color:#64748b; margin-bottom:6px;">üìã NOTAS DE COMPLIANCE</div>
                            
                            
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 5: FINANCIALS -->
                <div class="section">
                    <div class="section-title">üí∞ Viabilidad Financiera</div>
                    <div class="card" style="background:#f0fdf4; border-color:#16a34a40;">
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                            <div style="display:flex; align-items:center; gap:8px;">
                                <span style="font-size:1.5rem;">‚úÖ</span>
                                <div>
                                    <div style="font-size:0.9rem; font-weight:700; color:#16a34a;">Saludable</div>
                                    <div style="font-size:0.65rem; color:#64748b;">Estado Financiero General</div>
                                </div>
                            </div>
                            <div style="display:flex; gap:20px; text-align:center;">
                                <div>
                                    <div style="font-size:1.1rem; font-weight:800; color:#1e293b;">$30</div>
                                    <div style="font-size:0.55rem; color:#64748b;">PRECIO</div>
                                </div>
                                <div>
                                    <div style="font-size:1.1rem; font-weight:800; color:#16a34a;">40.0%</div>
                                    <div style="font-size:0.55rem; color:#64748b;">MARGEN</div>
                                </div>
                                <div>
                                    <div style="font-size:1.1rem; font-weight:800; color:#3b82f6;">160%</div>
                                    <div style="font-size:0.55rem; color:#64748b;">ROI</div>
                                </div>
                                <div>
                                    <div style="font-size:1.1rem; font-weight:800; color:#1e293b;">12m</div>
                                    <div style="font-size:0.55rem; color:#64748b;">PAYBACK</div>
                                </div>
                            </div>
                        </div>
                        <div style="font-size:0.65rem; font-weight:700; color:#64748b; margin-bottom:8px;">üìä ESCENARIOS PROYECTADOS</div>
                        
        <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;">
            
            
            
        </div>
                    </div>
                </div>
                
                <!-- SECTION 6: NEXT STEPS -->
                <div class="section">
                    <div class="two-col">
                        <div>
                            <div class="section-title">‚úÖ Pr√≥ximos Pasos Recomendados</div>
                            <div class="card">
            <div style="display:flex; align-items:center; gap:8px; padding:8px 0; border-bottom:1px dashed #e2e8f0;">
                <span style="background:#0f172a; color:white; width:20px; height:20px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.65rem; font-weight:700;">1</span>
                <span style="font-size:0.8rem; color:#334155;">Profundizar investigaci√≥n de mercado</span>
            </div>
            <div style="display:flex; align-items:center; gap:8px; padding:8px 0; border-bottom:1px dashed #e2e8f0;">
                <span style="background:#0f172a; color:white; width:20px; height:20px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.65rem; font-weight:700;">2</span>
                <span style="font-size:0.8rem; color:#334155;">Evaluar diferenciadores adicionales</span>
            </div>
            <div style="display:flex; align-items:center; gap:8px; padding:8px 0; border-bottom:1px dashed #e2e8f0;">
                <span style="background:#0f172a; color:white; width:20px; height:20px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.65rem; font-weight:700;">3</span>
                <span style="font-size:0.8rem; color:#334155;">Recalcular m√°rgenes con costos reales</span>
            </div>
            <div style="display:flex; align-items:center; gap:8px; padding:8px 0; border-bottom:1px dashed #e2e8f0;">
                <span style="background:#0f172a; color:white; width:20px; height:20px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.65rem; font-weight:700;">4</span>
                <span style="font-size:0.8rem; color:#334155;">Considerar pivote o nicho alternativo</span>
            </div></div>
                        </div>
                        <div>
                            <div class="section-title">üìö Fuentes Analizadas</div>
                            <div style="display:flex; flex-wrap:wrap; gap:6px;"></div>
                            
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 7: CONTENT OPPORTUNITIES -->
                <div class="section">
                    <div class="section-title">üî• Oportunidades de Contenido</div>
                    <div class="two-col">
                        <div>
                            <div style="font-size:0.65rem; font-weight:700; color:#64748b; margin-bottom:8px;">üé¨ ESTILO GARYVEE (Alto Impacto)</div>
                            <div style="color:#94a3b8; font-size:0.75rem;">Sin oportunidades GaryVee detectadas.</div>
                        </div>
                        <div>
                            <div style="font-size:0.65rem; font-weight:700; color:#64748b; margin-bottom:8px;">üìä ESTILO NEIL PATEL (SEO/Educativo)</div>
                            <div style="color:#94a3b8; font-size:0.75rem;">Sin oportunidades Patel detectadas.</div>
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 8: MARKET INTELLIGENCE -->
                <div class="section">
                    <div class="section-title">üéØ Inteligencia de Mercado Expandida</div>
                    <div class="two-col">
                        <div>
                            <div style="font-size:0.65rem; font-weight:700; color:#64748b; margin-bottom:8px;">üìç BLANCO ESPACIAL (White Space Topics)</div>
                            <div style="display:flex; flex-wrap:wrap; gap:4px;">
                                <div style="color:#94a3b8; font-size:0.75rem;">N/A</div>
                            </div>
                            
                        </div>
                        <div>
                            <div style="font-size:0.65rem; font-weight:700; color:#64748b; margin-bottom:8px;">‚ö†Ô∏è LO QUE IGNORAN LOS COMPETIDORES</div>
                            <div style="color:#94a3b8; font-size:0.75rem;">Sin gaps detectados.</div>
                        </div>
                    </div>
                    
                </div>
            </div>
            
            <div class="footer">
                <div style="font-size: 0.65rem; color: #94a3b8;">NEXUS-360 Intelligence Platform ‚Ä¢ 2026-02-09 17:52:07.779445</div>
                <div style="display:flex; gap:10px; align-items:center;">
                    <button id="pdfDownloadBtn" onclick="downloadPDF()" class="footer-link" style="background:#8b5cf6; border:none; cursor:pointer;">
                        üì• Descargar PDF
                    </button>
                    <a href="/dashboard/reports/report_index.html" class="footer-link">üìÑ Ver An√°lisis Completo ‚Üí</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PDF Generation Script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        async function downloadPDF() {
            const btn = document.querySelector('#pdfDownloadBtn');
            if (!btn) return;
            const originalText = btn.innerHTML;
            btn.innerHTML = '‚è≥ Generando PDF...';
            btn.disabled = true;
            btn.style.opacity = '0.7';
            
            const element = document.querySelector('.brief');
            const briefTitle = document.title.replace('Executive Brief: ', '').trim();
            // Sanitize title: remove special chars, replace spaces with underscores
            const safeTitle = briefTitle.replace(/[^a-zA-Z0-9 ]/g, '').replace(/ +/g, '_').substring(0, 50) || 'Reporte';
            const timestamp = new Date().toISOString().slice(0,10);
            const filename = 'Executive_Brief_' + safeTitle + '_' + timestamp + '.pdf';
            
            // Hide buttons during PDF generation
            const buttons = document.querySelectorAll('.footer-link');
            buttons.forEach(b => b.style.visibility = 'hidden');
            
            try {
                const opt = {
                    margin: 0,
                    filename: filename,
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { 
                        scale: 2,
                        useCORS: true, 
                        logging: false,
                        letterRendering: true,
                        scrollY: 0
                    },
                    jsPDF: { 
                        unit: 'mm', 
                        format: 'a4', 
                        orientation: 'portrait',
                        compress: true
                    },
                    pagebreak: { 
                        mode: ['css', 'legacy'],
                        before: '.page-break'
                    }
                };
                
                await html2pdf().set(opt).from(element).save();
                
                btn.innerHTML = '‚úÖ Descargado!';
                setTimeout(() => { btn.innerHTML = originalText; }, 2000);
            } catch (error) {
                console.error('PDF Error:', error);
                btn.innerHTML = '‚ùå Error - Usa Ctrl+P';
                alert('Error al generar PDF autom√°ticamente. Usa Ctrl+P (o Cmd+P en Mac) para imprimir a PDF.');
                setTimeout(() => { btn.innerHTML = originalText; }, 3000);
            } finally {
                buttons.forEach(b => b.style.visibility = 'visible');
                btn.disabled = false;
                btn.style.opacity = '1';
            }
        }
    </script>
</body>
</html>